<div id="phantom-top10" style="font-family:sans-serif;"></div>

<script>
async function fetchPhantomTop10() {
  const apiKey = "YOUR_BIRDEYE_API_KEY"; // Replace with your key
  const url = "https://public-api.birdeye.so/defi/v3/token/list?sort_by=price_change_24h&sort_type=desc&offset=0&limit=50"; // fetch more to filter

  try {
    const res = await fetch(url, {
      headers: {
        "accept": "application/json",
        "x-chain": "solana",
        "X-API-KEY": apiKey
      }
    });

    const data = await res.json();
    if (!data.success) return console.error("API error:", data.message);

    // ---------- FILTER AND LIMIT TOP 10 ----------
    const minLiquidity = 50000;  // $50k
    const minVolume = 10000;     // $10k 24h

    const topTokens = data.data.items
      .filter(token => token.liquidity >= minLiquidity && token.volume_24h_usd >= minVolume)
      .slice(0, 10); // Take top 10 after filtering
    // ---------------------------------------------

    const container = document.getElementById("phantom-top10");
    container.innerHTML = "<h3>Top 10 Trending Solana Tokens</h3>";

    topTokens.forEach((token, i) => {
      const change = parseFloat(token.price_change_24h) || 0;
      const changeColor = change >= 0 ? "green" : "red";

      container.innerHTML += `
        <div style="margin-bottom:10px; border-bottom:1px solid #ddd; padding:5px;">
          <strong>${i+1}. ${token.symbol} (${token.name})</strong><br>
          24h Change: <span style="color:${changeColor}; font-weight:bold;">${change.toLocaleString()}%</span><br>
          Price: $${parseFloat(token.price_usd).toLocaleString()}<br>
          Market Cap: $${parseFloat(token.market_cap || 0).toLocaleString()}
        </div>
      `;
    });

  } catch (err) {
    console.error("Fetch error:", err);
  }
}

// Initial fetch + update every 5 minutes
fetchPhantomTop10();
setInterval(fetchPhantomTop10, 300000);
                      </script>
